(function(e){function t(t){for(var s,a,i=t[0],u=t[1],c=t[2],l=0,p=[];l<i.length;l++)a=i[l],o[a]&&p.push(o[a][0]),o[a]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s]);f&&f(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],s=!0,a=1;a<n.length;a++){var u=n[a];0!==o[u]&&(s=!1)}s&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var s={},o={app:0},r=[];function a(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"23b4f5cc"}[e]+".js"}function i(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise(function(t,s){n=o[e]=[t,s]});t.push(n[2]=s);var r,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=a(e),r=function(t){u.onerror=u.onload=null,clearTimeout(c);var n=o[e];if(0!==n){if(n){var s=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+s+": "+r+")");a.type=s,a.request=r,n[1](a)}o[e]=void 0}};var c=setTimeout(function(){r({type:"timeout",target:u})},12e4);u.onerror=u.onload=r,document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=s,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var f=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var s=n("64a9"),o=n.n(s);o.a},"3aff":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],a=(n("034f"),n("2877")),i={},u=Object(a["a"])(i,o,r,!1,null,null,null),c=u.exports,l=n("2f62");s["default"].use(l["a"]);var f=new l["a"].Store({state:{},mutations:{},actions:{}}),p=n("8c4f"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px","label-position":"left"}},[n("el-form-item",{attrs:{label:"手机号"}},[n("div",{staticClass:"flexBox"},[n("el-input",{model:{value:e.telNum,callback:function(t){e.telNum=t},expression:"telNum"}}),n("el-button",{staticClass:"mar-hov-s",attrs:{type:"primary"},on:{click:e.getCheckCode}},[e._v("获取验证码")])],1)]),n("el-form-item",{attrs:{label:"验证码"}},[n("div",{staticClass:"flexBox"},[n("el-input",{model:{value:e.checkCode,callback:function(t){e.checkCode=t},expression:"checkCode"}}),n("el-button",{staticClass:"mar-hov-s",attrs:{type:"primary"},on:{click:e.getToken}},[e._v("获取token")])],1)]),n("el-form-item",{attrs:{label:"token列表"}},e._l(e.tokens,function(t,s){return n("div",{key:s,staticClass:"flexCenter"},[n("el-input",{class:0!=s?"pad-ver-s":"",model:{value:e.tokens[s],callback:function(t){e.$set(e.tokens,s,t)},expression:"tokens[index]"}}),n("i",0===s?{staticClass:"el-icon-plus font-big pad-hov-s",on:{click:function(t){return e.tokens.push("")}}}:{staticClass:"el-icon-minus font-big pad-hov-s",on:{click:function(t){return e.tokens.splice(s,1)}}})],1)}),0),n("el-form-item",{attrs:{label:"开始时间"}},[n("el-date-picker",{attrs:{type:"datetime",placeholder:"开始抢券时间"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1),n("el-form-item",{attrs:{label:"频率"}},[n("el-input-number",{attrs:{min:1,max:5,label:"每秒抢券次数"},model:{value:e.num,callback:function(t){e.num=t},expression:"num"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",disabled:!!e.status},on:{click:e.onSubmit}},[e._v("开始")]),n("el-button",{on:{click:e.onCancel}},[e._v("暂停")])],1)],1)],1)},d=[],h=(n("ac6a"),{name:"home",data:function(){return{form:{name:""},tokens:[""],tokensCopy:[],startTime:new Date,num:1,status:0,submitInt:0,getCouponInt:0,telNum:"",checkCode:""}},methods:{onSubmit:function(){var e=this,t=this;this.status=1,this.tokens&&0!==this.tokens.length&&(this.submitInt=setInterval(function(){var n=(new Date).getTime(),s=t.startTime.getTime()-1e3;n>=s&&(clearInterval(t.submitInt),e.tokensCopy=JSON.parse(JSON.stringify(e.tokens)),e.getCouponInt=setInterval(function(){e.multGetCoupon()},1e3/e.num))},1e3))},onCancel:function(){this.status=0,clearInterval(this.submitInt),clearInterval(this.getCouponInt)},multGetCoupon:function(){var e=this,t=this;if(this.tokensCopy&&0!==this.tokensCopy.length){var n=Math.floor(((new Date).getTime()-new Date("2019-07-22").getTime())/864e5)+32;this.tokensCopy.forEach(function(s,o){e.$api.ReceivingPreferentialOffers({PreferentialOffersId:n,token:s}).then(function(n){if(0!=n.code&&"已经领取过了"!==n.msg)return t.$message.info(n.msg),e.$api.GetCouponList({token:s});t.tokensCopy.splice(o,1),t.$message.success(n.msg)}).then(function(n){n&&n.data&&n.data.forEach(function(n){e.$api.ReceivingPreferentialOffers({PreferentialOffersId:n.id,token:s}).then(function(e){0==e.code?(t.tokensCopy.splice(o,1),t.$message.success(e.msg)):t.$message.info(e.msg)})})})})}else this.onCancel()},getCheckCode:function(){this.$api.SendSMS({mobile:this.telNum}),this.$message.success("发送验证码成功！")},getToken:function(){var e=this;this.$api.GetToken({mobile:this.telNum,code:this.checkCode}).then(function(t){0===t.code&&(e.tokens[0]?e.tokens.push(t.data.token):(e.tokens[0]=t.data.token,e.$set(e.tokens,0,t.data.token)),e.$message.success("获取token成功"))})}},mounted:function(){}}),g=h,b=(n("871d"),Object(a["a"])(g,m,d,!1,null,"04a7d39f",null)),v=b.exports;s["default"].use(p["a"]);var k=new p["a"]({routes:[{path:"/",name:"home",component:v},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]}),C=n("bc3a"),y=n.n(C),x={debug:!1,method:"post",baseURLDebug:"/api",baseURL:"https://ty.xmsoft.com/",headers:{"Content-Type":"application/json;charset=UTF-8"},data:{},timeout:1e4,withCredentials:!0,responseType:"json",xApiVersion:"1.0"},w=n("5c96"),T=n.n(w);function O(e){return e.headers||(e.headers={}),e.headers["Cache-Control"]="no-cache",new Promise(function(t,n){var s="";x.debug?s=x.baseURLDebug:(s=x.baseURL,y.a.defaults.headers={"x-api-version":x.xApiVersion,filename:"utf-8"});var o=y.a.create({baseURL:s,headers:e.headers||{},responseType:e.responseType||"json",transformResponse:[function(e){return e}],withCredentials:x.withCredentials});o.interceptors.request.use(function(e){return e},function(e){console.log("request:",e),"ECONNABORTED"===e.code&&-1!==e.message.indexOf("timeout")&&console.log("根据你设置的timeout/真的请求超时 判断请求现在超时了，你可以在这里加入超时的处理方案");var t=e.response;if(console.log(t),t){var n=t.status;k.push({path:"/error/".concat(n)})}return Promise.reject(e)}),o.interceptors.response.use(function(e){var t;if(t=void 0===e.data?e.request.responseText:e.data,e.headers["content-disposition"]){var n=e.headers["content-disposition"],s=e.headers["x-file-name"];if(s)return{bufferData:t,fileName:s};var o=n.indexOf("filename");if(-1!==o){var r=n.substring(o+10,n.length-1);return{bufferData:t,fileName:r}}return t}return t},function(t){var n={};if("Network Error"===t.message)t.message="请求服务器网络错误！";else{if(t.response&&t.response.request&&t.response.request.response&&"string"===typeof t.response.request.response){var s=t.response.request.response;n=JSON.parse(s)}if(t&&t.response){switch(t.response.status){case 400:t.message="请求错误";break;case 401:t.message="未授权，请登录";break;case 403:t.message="拒绝访问";break;case 404:t.message="请求地址出错: ".concat(t.response.config.url);break;case 408:t.message="请求超时";break;case 500:t.message="服务器内部错误";break;case 501:t.message="服务未实现";break;case 502:t.message="网关错误";break;case 503:t.message="服务不可用";break;case 504:t.message="网关超时";break;case 505:t.message="HTTP版本不受支持";break;default:}var o=t.response.data;o&&o.code&&(t.message=o.message)}n.message&&(t.message=n.message)}return-1!==t.message.indexOf("Value is not a valid ByteString")&&(t.message="系统异常"),e.hideMessage||w["Message"].error("".concat(t.message)),Promise.reject(t)}),o(e).then(function(e){return t(e),!1}).catch(function(e){n(e)})})}var S=O,P=function(e){return S({url:"Coupon/GetCouponList",headers:{token:e.token},method:"get",params:e})},j=function(e){return S({url:"Coupon/ReceivingPreferentialOffers",headers:{token:e.token},method:"get",params:e})},$=function(e){return S({url:"SMS/SendSMS",method:"get",params:e})},_=function(e){return S({url:"Login/Login",method:"get",params:e})},I={GetCouponList:P,ReceivingPreferentialOffers:j,SendSMS:$,GetToken:_},N=function e(t){e.installed||(e.installed=!0,Object.defineProperties(t.prototype,{$api:{get:function(){return I}}}))},L=N;n("0fae"),n("3aff");s["default"].use(L),s["default"].use(T.a),s["default"].config.productionTip=!1,new s["default"]({store:f,router:k,render:function(e){return e(c)}}).$mount("#app")},"64a9":function(e,t,n){},"871d":function(e,t,n){"use strict";var s=n("c6e2"),o=n.n(s);o.a},c6e2:function(e,t,n){}});
//# sourceMappingURL=app.2a6aa013.js.map